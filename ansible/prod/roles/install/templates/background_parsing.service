#!/bin/sh

[Unit]
Description=Django command to consume messages from the parsing queue
After=network.target

[Service]
PIDFile=/var/run/background_parsing.pid
User={{ deployer_user }}
Group={{ deployer_group }}
ExecStart=/bin/bash -c '. {{ app_dir }}/.env && {{ venv_python }} {{ app_dir }}/manage.py process_tasks --queue parsing --sleep 1'
Restart=always
MemoryMax=400M

[Install]
WantedBy=multi-user.target